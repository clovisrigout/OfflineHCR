import tensorflow as tf
import numpy as np
import cPickle as pickle # to load object to disk
import random
from sets import Set


from data import Data
from cnnModel import cnnModel

alphabet = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]

alphabetDict = {"a":0,"b":1,"c":2,"d":3,"e":4,"f":5,"g":6,"h":7,"i":8,"j":9,"k":10,"l":11,"m":12,"n":13,"o":14,"p":15,"q":16,"r":17,"s":18,"t":19,"u":20,"v":21,"w":22,"x":23,"y":24,"z":25}


def loadData():

    with open('../data/dataWithGen.pkl', 'rb') as input:
        dataO = pickle.load(input)
        return dataO

def loadModel():

	with open('../models/model.pkl', 'rb') as input:
		modelO = pickle.load(input)
		return modelO

def main():
	data = loadData()

	startProb = np.array([.11602, .04702, .03511, .02670, .02007, .03779, .01950, .07232, .06286, .00597, .00590, .02705, .04383, .02365, .06264, .02545, .00173, .01653, .07755, .16671, .01487, .00649, .06753, .00017, .01620, .00034]) # source = https://en.wikipedia.org/wiki/Letter_frequency#Relative_frequencies_of_the_first_letters_of_a_word_in_the_English_language

	transitionProbs = []
	with open('../data/transition_prob.txt', 'rb') as file:
		index = 0
		for line in file:
			transitions = []
			print len(line.split())
			frequencies = [int(freq) for freq in line.split()]
			total = sum(frequencies)
			for freq in frequencies:
				transitions.append(float(freq)/total)
			transitionProbs.append(transitions)
			index = index+1
		print transitionProbs[0]
		print transitionProbs[25]

	transmat = np.array(transitionProbs)


	emissions = [[0.7399497487437185, 0.007537688442211055, 0.007537688442211055, 0.016331658291457288, 0.00628140703517588, 0.0037688442211055275, 0.02135678391959799, 0.001256281407035176, 0.0, 0.0, 0.005025125628140704, 0.001256281407035176, 0.02135678391959799, 0.04648241206030151, 0.04396984924623116, 0.005025125628140704, 0.010050251256281407, 0.017587939698492462, 0.0037688442211055275, 0.00628140703517588, 0.01507537688442211, 0.0, 0.010050251256281407, 0.002512562814070352, 0.0, 0.007537688442211055], [0.0, 0.869198312236287, 0.004219409282700422, 0.016877637130801686, 0.012658227848101266, 0.008438818565400843, 0.004219409282700422, 0.02109704641350211, 0.004219409282700422, 0.0, 0.0, 0.004219409282700422, 0.004219409282700422, 0.0, 0.012658227848101266, 0.008438818565400843, 0.0, 0.0, 0.008438818565400843, 0.004219409282700422, 0.004219409282700422, 0.0, 0.0, 0.0, 0.0, 0.012658227848101266], [0.02030456852791878, 0.0, 0.8730964467005076, 0.005076142131979695, 0.04568527918781726, 0.005076142131979695, 0.0, 0.0025380710659898475, 0.005076142131979695, 0.0, 0.0, 0.0, 0.0, 0.0, 0.027918781725888325, 0.0, 0.0, 0.005076142131979695, 0.0025380710659898475, 0.0, 0.0025380710659898475, 0.0, 0.0, 0.0, 0.0025380710659898475, 0.0025380710659898475], [0.0392156862745098, 0.0784313725490196, 0.00392156862745098, 0.6196078431372549, 0.0, 0.027450980392156862, 0.047058823529411764, 0.027450980392156862, 0.00392156862745098, 0.03137254901960784, 0.00784313725490196, 0.023529411764705882, 0.00392156862745098, 0.00392156862745098, 0.023529411764705882, 0.00392156862745098, 0.00784313725490196, 0.0, 0.011764705882352941, 0.00392156862745098, 0.00784313725490196, 0.00784313725490196, 0.00784313725490196, 0.0, 0.0, 0.00784313725490196], [0.026172300981461286, 0.0054525627044711015, 0.026172300981461286, 0.0, 0.806979280261723, 0.013086150490730643, 0.013086150490730643, 0.0, 0.0, 0.0, 0.008724100327153763, 0.0010905125408942203, 0.0021810250817884407, 0.0, 0.008724100327153763, 0.025081788440567066, 0.0054525627044711015, 0.008724100327153763, 0.008724100327153763, 0.0010905125408942203, 0.004362050163576881, 0.0, 0.004362050163576881, 0.0, 0.0, 0.030534351145038167], [0.005025125628140704, 0.005025125628140704, 0.0, 0.010050251256281407, 0.020100502512562814, 0.8190954773869347, 0.005025125628140704, 0.005025125628140704, 0.0, 0.0, 0.0, 0.005025125628140704, 0.0, 0.005025125628140704, 0.0, 0.04522613065326633, 0.0, 0.01507537688442211, 0.005025125628140704, 0.04522613065326633, 0.0, 0.005025125628140704, 0.0, 0.0, 0.0, 0.005025125628140704], [0.020964360587002098, 0.012578616352201259, 0.0, 0.0041928721174004195, 0.0, 0.0041928721174004195, 0.7526205450733753, 0.0041928721174004195, 0.0, 0.012578616352201259, 0.0, 0.0, 0.0, 0.0041928721174004195, 0.025157232704402517, 0.010482180293501049, 0.039832285115303984, 0.006289308176100629, 0.05660377358490566, 0.0020964360587002098, 0.0, 0.0041928721174004195, 0.0, 0.0, 0.027253668763102725, 0.012578616352201259], [0.0, 0.08609271523178808, 0.0, 0.006622516556291391, 0.0, 0.006622516556291391, 0.0, 0.7284768211920529, 0.006622516556291391, 0.0, 0.033112582781456956, 0.046357615894039736, 0.006622516556291391, 0.026490066225165563, 0.0, 0.006622516556291391, 0.0, 0.006622516556291391, 0.0, 0.013245033112582781, 0.019867549668874173, 0.0, 0.006622516556291391, 0.0, 0.0, 0.0], [0.0, 0.008501594048884165, 0.008501594048884165, 0.0010626992561105207, 0.0, 0.04250797024442083, 0.009564293304994687, 0.005313496280552604, 0.7396386822529224, 0.024442082890541977, 0.0010626992561105207, 0.12646121147715197, 0.0, 0.0021253985122210413, 0.0010626992561105207, 0.005313496280552604, 0.0010626992561105207, 0.003188097768331562, 0.006376195536663124, 0.007438894792773645, 0.0, 0.003188097768331562, 0.0, 0.0010626992561105207, 0.0, 0.0021253985122210413], [0.0, 0.029411764705882353, 0.0, 0.029411764705882353, 0.0, 0.0, 0.058823529411764705, 0.0, 0.08823529411764706, 0.6176470588235294, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.029411764705882353, 0.0, 0.0, 0.029411764705882353, 0.058823529411764705, 0.0, 0.0, 0.0, 0.058823529411764705], [0.010471204188481676, 0.06806282722513089, 0.0, 0.020942408376963352, 0.010471204188481676, 0.03664921465968586, 0.005235602094240838, 0.05759162303664921, 0.010471204188481676, 0.0, 0.643979057591623, 0.005235602094240838, 0.015706806282722512, 0.010471204188481676, 0.005235602094240838, 0.010471204188481676, 0.0, 0.04712041884816754, 0.010471204188481676, 0.0, 0.005235602094240838, 0.0, 0.005235602094240838, 0.010471204188481676, 0.005235602094240838, 0.005235602094240838], [0.0, 0.009584664536741214, 0.03194888178913738, 0.0, 0.003194888178913738, 0.012779552715654952, 0.009584664536741214, 0.004792332268370607, 0.07188498402555911, 0.004792332268370607, 0.003194888178913738, 0.7891373801916933, 0.0, 0.0, 0.0, 0.019169329073482427, 0.003194888178913738, 0.0, 0.0, 0.01597444089456869, 0.0, 0.012779552715654952, 0.0, 0.001597444089456869, 0.006389776357827476, 0.0], [0.009836065573770493, 0.0, 0.0, 0.0, 0.0, 0.003278688524590164, 0.003278688524590164, 0.003278688524590164, 0.0, 0.0, 0.0, 0.0, 0.9081967213114754, 0.04262295081967213, 0.003278688524590164, 0.0, 0.0, 0.009836065573770493, 0.0, 0.0, 0.006557377049180328, 0.0, 0.009836065573770493, 0.0, 0.0, 0.0], [0.02920443101711984, 0.004028197381671702, 0.0, 0.004028197381671702, 0.0010070493454179255, 0.0030211480362537764, 0.0030211480362537764, 0.028197381671701913, 0.0010070493454179255, 0.0010070493454179255, 0.002014098690835851, 0.0010070493454179255, 0.03927492447129909, 0.798590130916415, 0.007049345417925478, 0.007049345417925478, 0.0010070493454179255, 0.012084592145015106, 0.0, 0.0030211480362537764, 0.03323262839879154, 0.005035246727089627, 0.014098690835850957, 0.0010070493454179255, 0.0010070493454179255, 0.0], [0.012482662968099861, 0.008321775312066574, 0.006934812760055479, 0.0013869625520110957, 0.004160887656033287, 0.006934812760055479, 0.011095700416088766, 0.0, 0.0013869625520110957, 0.005547850208044383, 0.0, 0.0013869625520110957, 0.0, 0.004160887656033287, 0.9112343966712899, 0.008321775312066574, 0.0, 0.0, 0.004160887656033287, 0.0, 0.0, 0.005547850208044383, 0.0013869625520110957, 0.0, 0.0027739251040221915, 0.0027739251040221915], [0.0, 0.0, 0.0, 0.0, 0.003745318352059925, 0.03745318352059925, 0.0, 0.0, 0.0, 0.0, 0.0, 0.018726591760299626, 0.0, 0.0, 0.0, 0.8913857677902621, 0.003745318352059925, 0.026217228464419477, 0.0, 0.003745318352059925, 0.0, 0.0, 0.0, 0.0, 0.00749063670411985, 0.00749063670411985], [0.08064516129032258, 0.0, 0.0, 0.0, 0.016129032258064516, 0.03225806451612903, 0.20967741935483872, 0.016129032258064516, 0.0, 0.0, 0.016129032258064516, 0.016129032258064516, 0.0, 0.0, 0.0, 0.12903225806451613, 0.3225806451612903, 0.0, 0.03225806451612903, 0.03225806451612903, 0.0, 0.0, 0.016129032258064516, 0.0, 0.03225806451612903, 0.04838709677419355], [0.006012024048096192, 0.004008016032064128, 0.014028056112224449, 0.0, 0.006012024048096192, 0.15430861723446893, 0.006012024048096192, 0.008016032064128256, 0.01002004008016032, 0.0, 0.008016032064128256, 0.006012024048096192, 0.018036072144288578, 0.01002004008016032, 0.0, 0.052104208416833664, 0.002004008016032064, 0.6132264529058116, 0.014028056112224449, 0.02404809619238477, 0.002004008016032064, 0.03006012024048096, 0.002004008016032064, 0.002004008016032064, 0.006012024048096192, 0.002004008016032064], [0.003472222222222222, 0.013888888888888888, 0.013888888888888888, 0.0, 0.0, 0.013888888888888888, 0.034722222222222224, 0.0, 0.003472222222222222, 0.003472222222222222, 0.0, 0.003472222222222222, 0.0, 0.003472222222222222, 0.006944444444444444, 0.0, 0.0, 0.0, 0.8888888888888888, 0.0, 0.0, 0.0, 0.0, 0.003472222222222222, 0.0, 0.006944444444444444], [0.0022624434389140274, 0.01583710407239819, 0.0022624434389140274, 0.0, 0.006787330316742082, 0.11538461538461539, 0.004524886877828055, 0.011312217194570135, 0.01583710407239819, 0.006787330316742082, 0.01809954751131222, 0.01583710407239819, 0.0, 0.0022624434389140274, 0.004524886877828055, 0.020361990950226245, 0.004524886877828055, 0.027149321266968326, 0.004524886877828055, 0.6923076923076923, 0.0022624434389140274, 0.0022624434389140274, 0.0, 0.004524886877828055, 0.00904977375565611, 0.011312217194570135], [0.053830227743271224, 0.018633540372670808, 0.002070393374741201, 0.004140786749482402, 0.0, 0.0, 0.002070393374741201, 0.018633540372670808, 0.002070393374741201, 0.002070393374741201, 0.006211180124223602, 0.0, 0.004140786749482402, 0.037267080745341616, 0.035196687370600416, 0.002070393374741201, 0.0, 0.0, 0.0, 0.0, 0.5714285714285714, 0.21739130434782608, 0.022774327122153208, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.007575757575757576, 0.007575757575757576, 0.0, 0.015151515151515152, 0.0, 0.0, 0.0, 0.0, 0.0, 0.030303030303030304, 0.0, 0.030303030303030304, 0.0, 0.015151515151515152, 0.0, 0.0, 0.05303030303030303, 0.8333333333333334, 0.007575757575757576, 0.0, 0.0, 0.0], [0.011363636363636364, 0.03409090909090909, 0.0, 0.011363636363636364, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.045454545454545456, 0.03409090909090909, 0.011363636363636364, 0.011363636363636364, 0.0, 0.0, 0.0, 0.0, 0.03409090909090909, 0.011363636363636364, 0.7954545454545454, 0.0, 0.0, 0.0], [0.03896103896103896, 0.012987012987012988, 0.0, 0.0, 0.0, 0.07792207792207792, 0.0, 0.0, 0.0, 0.0, 0.03896103896103896, 0.0, 0.025974025974025976, 0.0, 0.0, 0.025974025974025976, 0.0, 0.07792207792207792, 0.012987012987012988, 0.025974025974025976, 0.0, 0.012987012987012988, 0.0, 0.5844155844155844, 0.06493506493506493, 0.0], [0.0, 0.009852216748768473, 0.0, 0.014778325123152709, 0.0049261083743842365, 0.034482758620689655, 0.21674876847290642, 0.0, 0.0, 0.0, 0.0, 0.024630541871921183, 0.0, 0.0049261083743842365, 0.009852216748768473, 0.07389162561576355, 0.014778325123152709, 0.009852216748768473, 0.014778325123152709, 0.024630541871921183, 0.0049261083743842365, 0.014778325123152709, 0.0, 0.0049261083743842365, 0.5073891625615764, 0.009852216748768473], [0.02252252252252252, 0.009009009009009009, 0.0045045045045045045, 0.0, 0.036036036036036036, 0.0045045045045045045, 0.018018018018018018, 0.0045045045045045045, 0.0, 0.0045045045045045045, 0.013513513513513514, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.009009009009009009, 0.02702702702702703, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8468468468468469]]

	with open('../data/testText.txt', 'rb') as file:
		index = 0
		dictionary = Set()
		for line in file:
			words = line.split()
			for word in words:
				dictionary.add(word)
		print dictionary


if __name__ == "__main__":
	main()